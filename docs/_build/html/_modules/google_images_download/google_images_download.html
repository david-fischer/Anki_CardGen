

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>google_images_download.google_images_download &mdash; ACG 0.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> ACG
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../ACG.anki.html">ACG.anki</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACG.my_kivy.html">ACG.my_kivy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACG.word_requests.html">ACG.word_requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACG.main.html">ACG.main</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACG.utils.html">ACG.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ACG</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../google_images_download.html">google_images_download</a> &raquo;</li>
        
      <li>google_images_download.google_images_download</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for google_images_download.google_images_download</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># In[ ]:</span>
<span class="c1">#  coding: utf-8</span>

<span class="c1">###### Searching and Downloading Google Images to the local disk ######</span>

<span class="c1"># Import Libraries</span>
<span class="kn">import</span> <span class="nn">sys</span>

<div class="viewcode-block" id="version"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.version">[docs]</a><span class="n">version</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>
<div class="viewcode-block" id="cur_version"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.cur_version">[docs]</a><span class="n">cur_version</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span></div>
<span class="k">if</span> <span class="n">cur_version</span> <span class="o">&gt;=</span> <span class="n">version</span><span class="p">:</span>  <span class="c1"># If the Current Version of Python is 3.0 or above</span>
    <span class="kn">import</span> <span class="nn">urllib.request</span>
    <span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>
    <span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">URLError</span><span class="p">,</span> <span class="n">HTTPError</span>
    <span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">quote</span>
    <span class="kn">import</span> <span class="nn">http.client</span>
    <span class="kn">from</span> <span class="nn">http.client</span> <span class="kn">import</span> <span class="n">IncompleteRead</span><span class="p">,</span> <span class="n">BadStatusLine</span>

<div class="viewcode-block" id="_MAXHEADERS"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download._MAXHEADERS">[docs]</a>    <span class="n">http</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">_MAXHEADERS</span> <span class="o">=</span> <span class="mi">1000</span></div>
<span class="k">else</span><span class="p">:</span>  <span class="c1"># If the Current Version of Python is 2.x</span>
    <span class="kn">import</span> <span class="nn">urllib2</span>
    <span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>
    <span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">URLError</span><span class="p">,</span> <span class="n">HTTPError</span>
    <span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">quote</span>
    <span class="kn">import</span> <span class="nn">httplib</span>
    <span class="kn">from</span> <span class="nn">httplib</span> <span class="kn">import</span> <span class="n">IncompleteRead</span><span class="p">,</span> <span class="n">BadStatusLine</span>

    <span class="n">httplib</span><span class="o">.</span><span class="n">_MAXHEADERS</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="kn">import</span> <span class="nn">time</span>  <span class="c1"># Importing the time library to check the time of code execution</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">ssl</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">codecs</span>

<div class="viewcode-block" id="args_list"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.args_list">[docs]</a><span class="n">args_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;keywords&quot;</span><span class="p">,</span>
    <span class="s2">&quot;keywords_from_file&quot;</span><span class="p">,</span>
    <span class="s2">&quot;prefix_keywords&quot;</span><span class="p">,</span>
    <span class="s2">&quot;suffix_keywords&quot;</span><span class="p">,</span>
    <span class="s2">&quot;limit&quot;</span><span class="p">,</span>
    <span class="s2">&quot;format&quot;</span><span class="p">,</span>
    <span class="s2">&quot;color&quot;</span><span class="p">,</span>
    <span class="s2">&quot;color_type&quot;</span><span class="p">,</span>
    <span class="s2">&quot;usage_rights&quot;</span><span class="p">,</span>
    <span class="s2">&quot;size&quot;</span><span class="p">,</span>
    <span class="s2">&quot;exact_size&quot;</span><span class="p">,</span>
    <span class="s2">&quot;aspect_ratio&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">,</span>
    <span class="s2">&quot;time&quot;</span><span class="p">,</span>
    <span class="s2">&quot;time_range&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delay&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="p">,</span>
    <span class="s2">&quot;single_image&quot;</span><span class="p">,</span>
    <span class="s2">&quot;output_directory&quot;</span><span class="p">,</span>
    <span class="s2">&quot;image_directory&quot;</span><span class="p">,</span>
    <span class="s2">&quot;no_directory&quot;</span><span class="p">,</span>
    <span class="s2">&quot;proxy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;similar_images&quot;</span><span class="p">,</span>
    <span class="s2">&quot;specific_site&quot;</span><span class="p">,</span>
    <span class="s2">&quot;print_urls&quot;</span><span class="p">,</span>
    <span class="s2">&quot;print_size&quot;</span><span class="p">,</span>
    <span class="s2">&quot;print_paths&quot;</span><span class="p">,</span>
    <span class="s2">&quot;metadata&quot;</span><span class="p">,</span>
    <span class="s2">&quot;extract_metadata&quot;</span><span class="p">,</span>
    <span class="s2">&quot;socket_timeout&quot;</span><span class="p">,</span>
    <span class="s2">&quot;thumbnail&quot;</span><span class="p">,</span>
    <span class="s2">&quot;thumbnail_only&quot;</span><span class="p">,</span>
    <span class="s2">&quot;language&quot;</span><span class="p">,</span>
    <span class="s2">&quot;prefix&quot;</span><span class="p">,</span>
    <span class="s2">&quot;chromedriver&quot;</span><span class="p">,</span>
    <span class="s2">&quot;related_images&quot;</span><span class="p">,</span>
    <span class="s2">&quot;safe_search&quot;</span><span class="p">,</span>
    <span class="s2">&quot;no_numbering&quot;</span><span class="p">,</span>
    <span class="s2">&quot;offset&quot;</span><span class="p">,</span>
    <span class="s2">&quot;no_download&quot;</span><span class="p">,</span>
    <span class="s2">&quot;save_source&quot;</span><span class="p">,</span>
    <span class="s2">&quot;silent_mode&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ignore_urls&quot;</span><span class="p">,</span></div>
<span class="p">]</span>


<div class="viewcode-block" id="user_input"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.user_input">[docs]</a><span class="k">def</span> <span class="nf">user_input</span><span class="p">():</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-cf&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--config_file&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;config file name&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">config_file_check</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">parse_known_args</span><span class="p">()</span>
    <span class="n">object_check</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">config_file_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">object_check</span><span class="p">[</span><span class="s2">&quot;config_file&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">json_file</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">config_file_check</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">config_file</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">json_file</span><span class="p">[</span><span class="s2">&quot;Records&quot;</span><span class="p">])):</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">args_list</span><span class="p">:</span>
                <span class="n">arguments</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">json_file</span><span class="p">[</span><span class="s2">&quot;Records&quot;</span><span class="p">][</span><span class="n">record</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">arguments</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="n">records_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Taking command line arguments from users</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-k&quot;</span><span class="p">,</span> <span class="s2">&quot;--keywords&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;delimited list input&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-kf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--keywords_from_file&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;extract list of keywords from a text file&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-sk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--suffix_keywords&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;comma separated additional words added after to main keyword&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-pk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--prefix_keywords&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;comma separated additional words added before main keyword&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-l&quot;</span><span class="p">,</span> <span class="s2">&quot;--limit&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;delimited list input&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--format&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;download images with specific format&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;gif&quot;</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;bmp&quot;</span><span class="p">,</span> <span class="s2">&quot;svg&quot;</span><span class="p">,</span> <span class="s2">&quot;webp&quot;</span><span class="p">,</span> <span class="s2">&quot;ico&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="s2">&quot;--url&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;search with google image URL&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-x&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--single_image&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;downloading a single image from URL&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-o&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--output_directory&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;download images in a specific main directory&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-i&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--image_directory&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;download images in a specific sub-directory&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--no_directory&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;download images in the main directory but no sub-directory&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-d&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--delay&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;delay in seconds to wait between downloading two images&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-co&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--color&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;filter on color&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;red&quot;</span><span class="p">,</span>
                <span class="s2">&quot;orange&quot;</span><span class="p">,</span>
                <span class="s2">&quot;yellow&quot;</span><span class="p">,</span>
                <span class="s2">&quot;green&quot;</span><span class="p">,</span>
                <span class="s2">&quot;teal&quot;</span><span class="p">,</span>
                <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
                <span class="s2">&quot;purple&quot;</span><span class="p">,</span>
                <span class="s2">&quot;pink&quot;</span><span class="p">,</span>
                <span class="s2">&quot;white&quot;</span><span class="p">,</span>
                <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
                <span class="s2">&quot;black&quot;</span><span class="p">,</span>
                <span class="s2">&quot;brown&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-ct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--color_type&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;filter on color&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;full-color&quot;</span><span class="p">,</span> <span class="s2">&quot;black-and-white&quot;</span><span class="p">,</span> <span class="s2">&quot;transparent&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-r&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--usage_rights&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;usage rights&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;labeled-for-reuse-with-modifications&quot;</span><span class="p">,</span>
                <span class="s2">&quot;labeled-for-reuse&quot;</span><span class="p">,</span>
                <span class="s2">&quot;labeled-for-noncommercial-reuse-with-modification&quot;</span><span class="p">,</span>
                <span class="s2">&quot;labeled-for-nocommercial-reuse&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--size&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;image size&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;large&quot;</span><span class="p">,</span>
                <span class="s2">&quot;medium&quot;</span><span class="p">,</span>
                <span class="s2">&quot;icon&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;400*300&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;640*480&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;800*600&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;1024*768&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;2MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;4MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;6MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;8MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;10MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;12MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;15MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;20MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;40MP&quot;</span><span class="p">,</span>
                <span class="s2">&quot;&gt;70MP&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-es&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--exact_size&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;exact image resolution &quot;WIDTH,HEIGHT&quot;&#39;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-t&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--type&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;image type&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;face&quot;</span><span class="p">,</span> <span class="s2">&quot;photo&quot;</span><span class="p">,</span> <span class="s2">&quot;clipart&quot;</span><span class="p">,</span> <span class="s2">&quot;line-drawing&quot;</span><span class="p">,</span> <span class="s2">&quot;animated&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-w&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--time&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;image age&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;past-24-hours&quot;</span><span class="p">,</span> <span class="s2">&quot;past-7-days&quot;</span><span class="p">,</span> <span class="s2">&quot;past-month&quot;</span><span class="p">,</span> <span class="s2">&quot;past-year&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-wr&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--time_range&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;time range for the age of the image. should be in the format {&quot;time_min&quot;:&quot;MM/DD/YYYY&quot;,&quot;time_max&quot;:&quot;MM/DD/YYYY&quot;}&#39;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-a&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--aspect_ratio&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;comma separated additional words added to keywords&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;tall&quot;</span><span class="p">,</span> <span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="s2">&quot;panoramic&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-si&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--similar_images&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;downloads images very similar to the image URL you provide&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-ss&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--specific_site&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;downloads images that are indexed from a specific website&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-p&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--print_urls&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Print the URLs of the images&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-ps&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--print_size&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Print the size of the images on disk&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-pp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--print_paths&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Prints the list of absolute paths of the images&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--metadata&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Print the metadata of the image&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-e&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--extract_metadata&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Dumps all the logs into a text file&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-st&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--socket_timeout&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Connection timeout waiting for the image to download&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-th&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--thumbnail&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Downloads image thumbnail along with the actual image&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-tho&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--thumbnail_only&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Downloads only thumbnail without downloading actual images&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-la&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--language&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Defines the language filter. The search results are authomatically returned in that language&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;Arabic&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Chinese (Simplified)&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Chinese (Traditional)&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Czech&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Danish&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Dutch&quot;</span><span class="p">,</span>
                <span class="s2">&quot;English&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Estonian&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Finnish&quot;</span><span class="p">,</span>
                <span class="s2">&quot;French&quot;</span><span class="p">,</span>
                <span class="s2">&quot;German&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Greek&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Hebrew&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Hungarian&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Icelandic&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Italian&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Japanese&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Korean&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Latvian&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Lithuanian&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Norwegian&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Portuguese&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Polish&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Romanian&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Russian&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Spanish&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Swedish&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Turkish&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-pr&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--prefix&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;A word that you would want to prefix in front of each image name&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-px&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--proxy&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify a proxy address and port&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-cd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--chromedriver&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify the path to chromedriver executable in your local machine&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-ri&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--related_images&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Downloads images that are similar to the keyword provided&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-sa&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--safe_search&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Turns on the safe search filter while searching for images&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-nn&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--no_numbering&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Allows you to exclude the default numbering of images&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-of&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--offset&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Where to start in the fetched links&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-nd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--no_download&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Prints the URLs of the images and/or thumbnails without downloading them&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-iu&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--ignore_urls&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;delimited list input of image urls/keywords to ignore&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-sil&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--silent_mode&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Remains silent. Does not print notification messages on the terminal&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-is&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--save_source&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;creates a text file containing a list of downloaded images along with source page url&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">records</span></div>


<div class="viewcode-block" id="googleimagesdownload"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload">[docs]</a><span class="k">class</span> <span class="nc">googleimagesdownload</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c1"># Downloading entire Web Document (Raw Page Content)</span>
<div class="viewcode-block" id="googleimagesdownload.download_page"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.download_page">[docs]</a>    <span class="k">def</span> <span class="nf">download_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="n">version</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cur_version</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span>
        <span class="k">if</span> <span class="n">cur_version</span> <span class="o">&gt;=</span> <span class="n">version</span><span class="p">:</span>  <span class="c1"># If the Current Version of Python is 3.0 or above</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">headers</span><span class="p">[</span>
                    <span class="s2">&quot;User-Agent&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;</span>
                <span class="n">req</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
                <span class="n">resp</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
                <span class="n">respData</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="k">return</span> <span class="n">respData</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Could not open URL. Please check your internet connection and/or ssl settings </span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;If you are using proxy, make sure your proxy settings is configured correctly&quot;</span>
                <span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># If the Current Version of Python is 2.x</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">headers</span><span class="p">[</span>
                    <span class="s2">&quot;User-Agent&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17&quot;</span>
                <span class="n">req</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">URLError</span><span class="p">:</span>  <span class="c1"># Handling SSL certificate failed</span>
                    <span class="n">context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">_create_unverified_context</span><span class="p">()</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
                <span class="n">page</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">page</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Could not open URL. Please check your internet connection and/or ssl settings </span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;If you are using proxy, make sure your proxy settings is configured correctly&quot;</span>
                <span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
                <span class="k">return</span> <span class="s2">&quot;Page Not found&quot;</span></div>

    <span class="c1"># Download Page for more than 100 images</span>
<div class="viewcode-block" id="googleimagesdownload.download_extended_page"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.download_extended_page">[docs]</a>    <span class="k">def</span> <span class="nf">download_extended_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">chromedriver</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
        <span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>

        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">ChromeOptions</span><span class="p">()</span>
        <span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-sandbox&quot;</span><span class="p">)</span>
        <span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--headless&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">chromedriver</span><span class="p">,</span> <span class="n">chrome_options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Looks like we cannot locate the path the &#39;chromedriver&#39; (use the &#39;--chromedriver&#39; &quot;</span>
                <span class="s2">&quot;argument to specify the path to the executable.) or google chrome browser is not &quot;</span>
                <span class="s2">&quot;installed on your machine (exception: </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">e</span>
            <span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">set_window_size</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">)</span>

        <span class="c1"># Open the link</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Getting you a lot of images. This may take a few moments...&quot;</span><span class="p">)</span>

        <span class="n">element</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)</span>
        <span class="c1"># Scroll down</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
            <span class="n">element</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">PAGE_DOWN</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">browser</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;smb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
                <span class="n">element</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">PAGE_DOWN</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>  <span class="c1"># bot id protection</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
                <span class="n">element</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">PAGE_DOWN</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>  <span class="c1"># bot id protection</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Reached end of Page.&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="n">source</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">page_source</span>  <span class="c1"># page source</span>
        <span class="c1"># close the browser</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">source</span></div>

    <span class="c1"># Correcting the escape characters for python2</span>
<div class="viewcode-block" id="googleimagesdownload.replace_with_byte"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.replace_with_byte">[docs]</a>    <span class="k">def</span> <span class="nf">replace_with_byte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">match</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">chr</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span> <span class="mi">8</span><span class="p">))</span></div>

<div class="viewcode-block" id="googleimagesdownload.repair"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.repair">[docs]</a>    <span class="k">def</span> <span class="nf">repair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">brokenjson</span><span class="p">):</span>
        <span class="n">invalid_escape</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">[0-7]{1,3}&quot;</span>
        <span class="p">)</span>  <span class="c1"># up to 3 digits for byte values up to FF</span>
        <span class="k">return</span> <span class="n">invalid_escape</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">replace_with_byte</span><span class="p">,</span> <span class="n">brokenjson</span><span class="p">)</span></div>

    <span class="c1"># Finding &#39;Next Image&#39; from the given raw page</span>
<div class="viewcode-block" id="googleimagesdownload.get_next_tab"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.get_next_tab">[docs]</a>    <span class="k">def</span> <span class="nf">get_next_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">start_line</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;class=&quot;dtviD&quot;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start_line</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>  <span class="c1"># If no links are found then give an error!</span>
            <span class="n">end_quote</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;no_tabs&quot;</span>
            <span class="k">return</span> <span class="n">link</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">end_quote</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">start_line</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;class=&quot;dtviD&quot;&#39;</span><span class="p">)</span>
            <span class="n">start_content</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;href=&quot;&#39;</span><span class="p">,</span> <span class="n">start_line</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">end_content</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;&quot;&gt;&#39;</span><span class="p">,</span> <span class="n">start_content</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">url_item</span> <span class="o">=</span> <span class="s2">&quot;https://www.google.com&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                <span class="n">s</span><span class="p">[</span><span class="n">start_content</span> <span class="o">+</span> <span class="mi">6</span> <span class="p">:</span> <span class="n">end_content</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">url_item</span> <span class="o">=</span> <span class="n">url_item</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&amp;amp;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;&quot;</span><span class="p">)</span>

            <span class="n">start_line_2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;class=&quot;dtviD&quot;&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&amp;amp;&quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;&quot;</span><span class="p">)</span>
            <span class="n">start_content_2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">start_line_2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">end_content_2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&amp;usg=&quot;</span><span class="p">,</span> <span class="n">start_content_2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">url_item_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">start_content_2</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">end_content_2</span><span class="p">])</span>

            <span class="n">chars</span> <span class="o">=</span> <span class="n">url_item_name</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;,g_1:&quot;</span><span class="p">)</span>
            <span class="n">chars_end</span> <span class="o">=</span> <span class="n">url_item_name</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">chars</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">chars_end</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">updated_item_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">url_item_name</span><span class="p">[</span><span class="n">chars</span> <span class="o">+</span> <span class="mi">5</span> <span class="p">:])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">updated_item_name</span> <span class="o">=</span> <span class="p">(</span><span class="n">url_item_name</span><span class="p">[</span><span class="n">chars</span> <span class="o">+</span> <span class="mi">5</span> <span class="p">:</span> <span class="n">chars_end</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="n">url_item</span><span class="p">,</span> <span class="n">updated_item_name</span><span class="p">,</span> <span class="n">end_content</span></div>

    <span class="c1"># Getting all links with the help of &#39;_images_get_next_image&#39;</span>
<div class="viewcode-block" id="googleimagesdownload.get_all_tabs"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.get_all_tabs">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_tabs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">):</span>
        <span class="n">tabs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">item</span><span class="p">,</span> <span class="n">item_name</span><span class="p">,</span> <span class="n">end_content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_next_tab</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="s2">&quot;no_tabs&quot;</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="ow">or</span> <span class="n">item_name</span> <span class="o">==</span> <span class="s2">&quot;background-color&quot;</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tabs</span><span class="p">[</span>
                        <span class="n">item_name</span>
                    <span class="p">]</span> <span class="o">=</span> <span class="n">item</span>  <span class="c1"># Append all the links in the list named &#39;Links&#39;</span>
                    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span>
                        <span class="mf">0.1</span>
                    <span class="p">)</span>  <span class="c1"># Timer could be used to slow down the request for image downloads</span>
                    <span class="n">page</span> <span class="o">=</span> <span class="n">page</span><span class="p">[</span><span class="n">end_content</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">tabs</span></div>

    <span class="c1"># Format the object in readable format</span>
<div class="viewcode-block" id="googleimagesdownload.format_object"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.format_object">[docs]</a>    <span class="k">def</span> <span class="nf">format_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">object</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">main</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">formatted_object</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">formatted_object</span><span class="p">[</span><span class="s2">&quot;image_height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">formatted_object</span><span class="p">[</span><span class="s2">&quot;image_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">formatted_object</span><span class="p">[</span><span class="s2">&quot;image_link&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">formatted_object</span><span class="p">[</span><span class="s2">&quot;image_format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span>
            <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">:</span>
        <span class="p">]</span>
        <span class="n">formatted_object</span><span class="p">[</span><span class="s2">&quot;image_description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;2003&quot;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">formatted_object</span><span class="p">[</span><span class="s2">&quot;image_host&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;183836587&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">formatted_object</span><span class="p">[</span><span class="s2">&quot;image_source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;2003&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">formatted_object</span><span class="p">[</span><span class="s2">&quot;image_thumbnail_url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">formatted_object</span></div>

    <span class="c1"># function to download single image</span>
<div class="viewcode-block" id="googleimagesdownload.single_image"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.single_image">[docs]</a>    <span class="k">def</span> <span class="nf">single_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_url</span><span class="p">):</span>
        <span class="n">main_directory</span> <span class="o">=</span> <span class="s2">&quot;downloads&quot;</span>
        <span class="n">extensions</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;.gif&quot;</span><span class="p">,</span> <span class="s2">&quot;.png&quot;</span><span class="p">,</span> <span class="s2">&quot;.bmp&quot;</span><span class="p">,</span> <span class="s2">&quot;.svg&quot;</span><span class="p">,</span> <span class="s2">&quot;.webp&quot;</span><span class="p">,</span> <span class="s2">&quot;.ico&quot;</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">image_url</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">main_directory</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="mi">17</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="k">pass</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17&quot;</span>
            <span class="p">},</span>
        <span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">response</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">image_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">[(</span><span class="n">url</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:])</span>
        <span class="k">if</span> <span class="s2">&quot;?&quot;</span> <span class="ow">in</span> <span class="n">image_name</span><span class="p">:</span>
            <span class="n">image_name</span> <span class="o">=</span> <span class="n">image_name</span><span class="p">[:</span> <span class="n">image_name</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;?&quot;</span><span class="p">)]</span>
        <span class="c1"># if &quot;.jpg&quot; in image_name or &quot;.gif&quot; in image_name or &quot;.png&quot; in image_name or &quot;.bmp&quot; in image_name or &quot;.svg&quot; in image_name or &quot;.webp&quot; in image_name or &quot;.ico&quot; in image_name:</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">extension</span><span class="p">:</span> <span class="n">extension</span> <span class="ow">in</span> <span class="n">image_name</span><span class="p">,</span> <span class="n">extensions</span><span class="p">)):</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">main_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">image_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">main_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">image_name</span> <span class="o">+</span> <span class="s2">&quot;.jpg&quot;</span>
            <span class="n">image_name</span> <span class="o">=</span> <span class="n">image_name</span> <span class="o">+</span> <span class="s2">&quot;.jpg&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">output_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">output_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;completed ====&gt; &quot;</span> <span class="o">+</span> <span class="n">image_name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;raw_unicode_escape&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span></div>

<div class="viewcode-block" id="googleimagesdownload.similar_images"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.similar_images">[docs]</a>    <span class="k">def</span> <span class="nf">similar_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">similar_images</span><span class="p">):</span>
        <span class="n">version</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cur_version</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span>
        <span class="k">if</span> <span class="n">cur_version</span> <span class="o">&gt;=</span> <span class="n">version</span><span class="p">:</span>  <span class="c1"># If the Current Version of Python is 3.0 or above</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">searchUrl</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;https://www.google.com/searchbyimage?site=search&amp;sa=X&amp;image_url=&quot;</span>
                    <span class="o">+</span> <span class="n">similar_images</span>
                <span class="p">)</span>
                <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">headers</span><span class="p">[</span>
                    <span class="s2">&quot;User-Agent&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;</span>

                <span class="n">req1</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">searchUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
                <span class="n">resp1</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req1</span><span class="p">)</span>
                <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resp1</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="n">l1</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;AMhZZ&quot;</span><span class="p">)</span>
                <span class="n">l2</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">,</span> <span class="n">l1</span><span class="p">)</span>
                <span class="n">urll</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">l1</span><span class="p">:</span><span class="n">l2</span><span class="p">]</span>

                <span class="n">newurl</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;https://www.google.com/search?tbs=sbi:&quot;</span>
                    <span class="o">+</span> <span class="n">urll</span>
                    <span class="o">+</span> <span class="s2">&quot;&amp;site=search&amp;sa=X&quot;</span>
                <span class="p">)</span>
                <span class="n">req2</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">newurl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
                <span class="n">resp2</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req2</span><span class="p">)</span>
                <span class="n">l3</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;/search?sa=X&amp;amp;q=&quot;</span><span class="p">)</span>
                <span class="n">l4</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">l3</span> <span class="o">+</span> <span class="mi">19</span><span class="p">)</span>
                <span class="n">urll2</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">l3</span> <span class="o">+</span> <span class="mi">19</span> <span class="p">:</span> <span class="n">l4</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">urll2</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;Cloud not connect to Google Images endpoint&quot;</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># If the Current Version of Python is 2.x</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">searchUrl</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;https://www.google.com/searchbyimage?site=search&amp;sa=X&amp;image_url=&quot;</span>
                    <span class="o">+</span> <span class="n">similar_images</span>
                <span class="p">)</span>
                <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">headers</span><span class="p">[</span>
                    <span class="s2">&quot;User-Agent&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17&quot;</span>

                <span class="n">req1</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">searchUrl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
                <span class="n">resp1</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req1</span><span class="p">)</span>
                <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resp1</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="n">l1</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;AMhZZ&quot;</span><span class="p">)</span>
                <span class="n">l2</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">,</span> <span class="n">l1</span><span class="p">)</span>
                <span class="n">urll</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">l1</span><span class="p">:</span><span class="n">l2</span><span class="p">]</span>

                <span class="n">newurl</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;https://www.google.com/search?tbs=sbi:&quot;</span>
                    <span class="o">+</span> <span class="n">urll</span>
                    <span class="o">+</span> <span class="s2">&quot;&amp;site=search&amp;sa=X&quot;</span>
                <span class="p">)</span>
                <span class="n">req2</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">newurl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
                <span class="n">resp2</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req2</span><span class="p">)</span>
                <span class="n">l3</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;/search?sa=X&amp;amp;q=&quot;</span><span class="p">)</span>
                <span class="n">l4</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">l3</span> <span class="o">+</span> <span class="mi">19</span><span class="p">)</span>
                <span class="n">urll2</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">l3</span> <span class="o">+</span> <span class="mi">19</span> <span class="p">:</span> <span class="n">l4</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">urll2</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;Cloud not connect to Google Images endpoint&quot;</span></div>

    <span class="c1"># Building URL parameters</span>
<div class="viewcode-block" id="googleimagesdownload.build_url_parameters"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.build_url_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">build_url_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arguments</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">]:</span>
            <span class="n">lang</span> <span class="o">=</span> <span class="s2">&quot;&amp;lr=&quot;</span>
            <span class="n">lang_param</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Arabic&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_ar&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Chinese (Simplified)&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_zh-CN&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Chinese (Traditional)&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_zh-TW&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Czech&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_cs&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Danish&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_da&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Dutch&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_nl&quot;</span><span class="p">,</span>
                <span class="s2">&quot;English&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_en&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Estonian&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_et&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Finnish&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_fi&quot;</span><span class="p">,</span>
                <span class="s2">&quot;French&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_fr&quot;</span><span class="p">,</span>
                <span class="s2">&quot;German&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_de&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Greek&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_el&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Hebrew&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_iw &quot;</span><span class="p">,</span>
                <span class="s2">&quot;Hungarian&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_hu&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Icelandic&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_is&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Italian&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_it&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Japanese&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_ja&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Korean&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_ko&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Latvian&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_lv&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Lithuanian&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_lt&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Norwegian&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_no&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Portuguese&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_pt&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Polish&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_pl&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Romanian&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_ro&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Russian&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_ru&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Spanish&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_es&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Swedish&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_sv&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Turkish&quot;</span><span class="p">:</span> <span class="s2">&quot;lang_tr&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">lang_url</span> <span class="o">=</span> <span class="n">lang</span> <span class="o">+</span> <span class="n">lang_param</span><span class="p">[</span><span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lang_url</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;time_range&quot;</span><span class="p">]:</span>
            <span class="n">json_acceptable_string</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;time_range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_acceptable_string</span><span class="p">)</span>
            <span class="n">time_range</span> <span class="o">=</span> <span class="s2">&quot;,cdr:1,cd_min:&quot;</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;time_min&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;,cd_max:&quot;</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;time_max&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">time_range</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;exact_size&quot;</span><span class="p">]:</span>
            <span class="n">size_array</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;exact_size&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
            <span class="n">exact_size</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;,isz:ex,iszw:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">size_array</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;,iszh:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">size_array</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exact_size</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="n">built_url</span> <span class="o">=</span> <span class="s2">&quot;&amp;tbs=&quot;</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>
                <span class="p">{</span>
                    <span class="s2">&quot;red&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:red&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;orange&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:orange&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;yellow&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:yellow&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;green&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:green&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;teal&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:teel&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;blue&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:blue&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;purple&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:purple&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;pink&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:pink&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;white&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:white&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;gray&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:gray&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;black&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:black&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;brown&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:specific,isc:brown&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;color_type&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;color_type&quot;</span><span class="p">],</span>
                <span class="p">{</span>
                    <span class="s2">&quot;full-color&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:color&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;black-and-white&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:gray&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;transparent&quot;</span><span class="p">:</span> <span class="s2">&quot;ic:trans&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;usage_rights&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;usage_rights&quot;</span><span class="p">],</span>
                <span class="p">{</span>
                    <span class="s2">&quot;labeled-for-reuse-with-modifications&quot;</span><span class="p">:</span> <span class="s2">&quot;sur:fmc&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;labeled-for-reuse&quot;</span><span class="p">:</span> <span class="s2">&quot;sur:fc&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;labeled-for-noncommercial-reuse-with-modification&quot;</span><span class="p">:</span> <span class="s2">&quot;sur:fm&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;labeled-for-nocommercial-reuse&quot;</span><span class="p">:</span> <span class="s2">&quot;sur:f&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">],</span>
                <span class="p">{</span>
                    <span class="s2">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:l&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:m&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:i&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;400*300&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:qsvga&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;640*480&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:vga&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;800*600&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:svga&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;1024*768&quot;</span><span class="p">:</span> <span class="s2">&quot;visz:lt,islt:xga&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;2MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:2mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;4MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:4mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;6MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:6mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;8MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:8mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;10MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:10mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;12MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:12mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;15MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:15mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;20MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:20mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;40MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:40mp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;&gt;70MP&quot;</span><span class="p">:</span> <span class="s2">&quot;isz:lt,islt:70mp&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                <span class="p">{</span>
                    <span class="s2">&quot;face&quot;</span><span class="p">:</span> <span class="s2">&quot;itp:face&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;photo&quot;</span><span class="p">:</span> <span class="s2">&quot;itp:photo&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;clipart&quot;</span><span class="p">:</span> <span class="s2">&quot;itp:clipart&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;line-drawing&quot;</span><span class="p">:</span> <span class="s2">&quot;itp:lineart&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;animated&quot;</span><span class="p">:</span> <span class="s2">&quot;itp:animated&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">],</span>
                <span class="p">{</span>
                    <span class="s2">&quot;past-24-hours&quot;</span><span class="p">:</span> <span class="s2">&quot;qdr:d&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;past-7-days&quot;</span><span class="p">:</span> <span class="s2">&quot;qdr:w&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;past-month&quot;</span><span class="p">:</span> <span class="s2">&quot;qdr:m&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;past-year&quot;</span><span class="p">:</span> <span class="s2">&quot;qdr:y&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;aspect_ratio&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;aspect_ratio&quot;</span><span class="p">],</span>
                <span class="p">{</span>
                    <span class="s2">&quot;tall&quot;</span><span class="p">:</span> <span class="s2">&quot;iar:t&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;square&quot;</span><span class="p">:</span> <span class="s2">&quot;iar:s&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;wide&quot;</span><span class="p">:</span> <span class="s2">&quot;iar:w&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;panoramic&quot;</span><span class="p">:</span> <span class="s2">&quot;iar:xw&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">],</span>
                <span class="p">{</span>
                    <span class="s2">&quot;jpg&quot;</span><span class="p">:</span> <span class="s2">&quot;ift:jpg&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;gif&quot;</span><span class="p">:</span> <span class="s2">&quot;ift:gif&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;png&quot;</span><span class="p">:</span> <span class="s2">&quot;ift:png&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bmp&quot;</span><span class="p">:</span> <span class="s2">&quot;ift:bmp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;svg&quot;</span><span class="p">:</span> <span class="s2">&quot;ift:svg&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;webp&quot;</span><span class="p">:</span> <span class="s2">&quot;webp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ico&quot;</span><span class="p">:</span> <span class="s2">&quot;ift:ico&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;raw&quot;</span><span class="p">:</span> <span class="s2">&quot;ift:craw&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ext_param</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="c1"># counter will tell if it is first param added or not</span>
                <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># add it to the built url</span>
                    <span class="n">built_url</span> <span class="o">=</span> <span class="n">built_url</span> <span class="o">+</span> <span class="n">ext_param</span>
                    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">built_url</span> <span class="o">=</span> <span class="n">built_url</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="n">ext_param</span>
                    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">built_url</span> <span class="o">=</span> <span class="n">lang_url</span> <span class="o">+</span> <span class="n">built_url</span> <span class="o">+</span> <span class="n">exact_size</span> <span class="o">+</span> <span class="n">time_range</span>
        <span class="k">return</span> <span class="n">built_url</span></div>

    <span class="c1"># building main search URL</span>
<div class="viewcode-block" id="googleimagesdownload.build_search_url"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.build_search_url">[docs]</a>    <span class="k">def</span> <span class="nf">build_search_url</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">search_term</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">similar_images</span><span class="p">,</span> <span class="n">specific_site</span><span class="p">,</span> <span class="n">safe_search</span>
    <span class="p">):</span>
        <span class="c1"># check safe_search</span>
        <span class="n">safe_search_string</span> <span class="o">=</span> <span class="s2">&quot;&amp;safe=active&quot;</span>
        <span class="c1"># check the args and choose the URL</span>
        <span class="k">if</span> <span class="n">url</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="k">elif</span> <span class="n">similar_images</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">similar_images</span><span class="p">)</span>
            <span class="n">keywordem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">similar_images</span><span class="p">(</span><span class="n">similar_images</span><span class="p">)</span>
            <span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;https://www.google.com/search?q=&quot;</span>
                <span class="o">+</span> <span class="n">keywordem</span>
                <span class="o">+</span> <span class="s2">&quot;&amp;espv=2&amp;biw=1366&amp;bih=667&amp;site=webhp&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ei=XosDVaCXD8TasATItgE&amp;ved=0CAcQ_AUoAg&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">specific_site</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;https://www.google.com/search?q=&quot;</span>
                <span class="o">+</span> <span class="n">quote</span><span class="p">(</span><span class="n">search_term</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
                <span class="o">+</span> <span class="s2">&quot;&amp;as_sitesearch=&quot;</span>
                <span class="o">+</span> <span class="n">specific_site</span>
                <span class="o">+</span> <span class="s2">&quot;&amp;espv=2&amp;biw=1366&amp;bih=667&amp;site=webhp&amp;source=lnms&amp;tbm=isch&quot;</span>
                <span class="o">+</span> <span class="n">params</span>
                <span class="o">+</span> <span class="s2">&quot;&amp;sa=X&amp;ei=XosDVaCXD8TasATItgE&amp;ved=0CAcQ_AUoAg&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;https://www.google.com/search?q=&quot;</span>
                <span class="o">+</span> <span class="n">quote</span><span class="p">(</span><span class="n">search_term</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
                <span class="o">+</span> <span class="s2">&quot;&amp;espv=2&amp;biw=1366&amp;bih=667&amp;site=webhp&amp;source=lnms&amp;tbm=isch&quot;</span>
                <span class="o">+</span> <span class="n">params</span>
                <span class="o">+</span> <span class="s2">&quot;&amp;sa=X&amp;ei=XosDVaCXD8TasATItgE&amp;ved=0CAcQ_AUoAg&quot;</span>
            <span class="p">)</span>

        <span class="c1"># safe search check</span>
        <span class="k">if</span> <span class="n">safe_search</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">safe_search_string</span>

        <span class="k">return</span> <span class="n">url</span></div>

    <span class="c1"># measures the file size</span>
<div class="viewcode-block" id="googleimagesdownload.file_size"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.file_size">[docs]</a>    <span class="k">def</span> <span class="nf">file_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="n">file_info</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">file_info</span><span class="o">.</span><span class="n">st_size</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bytes&quot;</span><span class="p">,</span> <span class="s2">&quot;KB&quot;</span><span class="p">,</span> <span class="s2">&quot;MB&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="s2">&quot;TB&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mf">1024.0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%3.1f</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
                <span class="n">size</span> <span class="o">/=</span> <span class="mf">1024.0</span>
            <span class="k">return</span> <span class="n">size</span></div>

    <span class="c1"># keywords from file</span>
<div class="viewcode-block" id="googleimagesdownload.keywords_from_file"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.keywords_from_file">[docs]</a>    <span class="k">def</span> <span class="nf">keywords_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">):</span>
        <span class="n">search_keyword</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">with</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8-sig&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;.csv&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">line</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">]:</span>
                        <span class="k">pass</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">search_keyword</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s2">&quot;.txt&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">line</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">]:</span>
                        <span class="k">pass</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">search_keyword</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Invalid file type: Valid file types are either .txt or .csv </span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;exiting...&quot;</span>
                <span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">search_keyword</span></div>

    <span class="c1"># make directories</span>
<div class="viewcode-block" id="googleimagesdownload.create_directories"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.create_directories">[docs]</a>    <span class="k">def</span> <span class="nf">create_directories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">main_directory</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">,</span> <span class="n">thumbnail</span><span class="p">,</span> <span class="n">thumbnail_only</span><span class="p">):</span>
        <span class="n">dir_name_thumbnail</span> <span class="o">=</span> <span class="n">dir_name</span> <span class="o">+</span> <span class="s2">&quot; - thumbnail&quot;</span>
        <span class="c1"># make a search keyword  directory</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">main_directory</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">main_directory</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.15</span><span class="p">)</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">dir_name</span>
                <span class="n">sub_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">main_directory</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_directory</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sub_directory</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">thumbnail</span> <span class="ow">or</span> <span class="n">thumbnail_only</span><span class="p">:</span>
                    <span class="n">sub_directory_thumbnail</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="n">main_directory</span><span class="p">,</span> <span class="n">dir_name_thumbnail</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_directory_thumbnail</span><span class="p">):</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sub_directory_thumbnail</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">dir_name</span>
                <span class="n">sub_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">main_directory</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_directory</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sub_directory</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">thumbnail</span> <span class="ow">or</span> <span class="n">thumbnail_only</span><span class="p">:</span>
                    <span class="n">sub_directory_thumbnail</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="n">main_directory</span><span class="p">,</span> <span class="n">dir_name_thumbnail</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_directory_thumbnail</span><span class="p">):</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sub_directory_thumbnail</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="mi">17</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="k">pass</span>
        <span class="k">return</span></div>

    <span class="c1"># Download Image thumbnails</span>
<div class="viewcode-block" id="googleimagesdownload.download_image_thumbnail"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.download_image_thumbnail">[docs]</a>    <span class="k">def</span> <span class="nf">download_image_thumbnail</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image_url</span><span class="p">,</span>
        <span class="n">main_directory</span><span class="p">,</span>
        <span class="n">dir_name</span><span class="p">,</span>
        <span class="n">return_image_name</span><span class="p">,</span>
        <span class="n">print_urls</span><span class="p">,</span>
        <span class="n">socket_timeout</span><span class="p">,</span>
        <span class="n">print_size</span><span class="p">,</span>
        <span class="n">no_download</span><span class="p">,</span>
        <span class="n">save_source</span><span class="p">,</span>
        <span class="n">img_src</span><span class="p">,</span>
        <span class="n">ignore_urls</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">print_urls</span> <span class="ow">or</span> <span class="n">no_download</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Image URL: &quot;</span> <span class="o">+</span> <span class="n">image_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">no_download</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="s2">&quot;Printed url without downloading&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span>
                <span class="n">image_url</span><span class="p">,</span>
                <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
                    <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17&quot;</span>
                <span class="p">},</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># timeout time to download an image</span>
                <span class="k">if</span> <span class="n">socket_timeout</span><span class="p">:</span>
                    <span class="n">timeout</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">socket_timeout</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span>

                <span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">response</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="n">path</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">main_directory</span>
                    <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
                    <span class="o">+</span> <span class="n">dir_name</span>
                    <span class="o">+</span> <span class="s2">&quot; - thumbnail&quot;</span>
                    <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
                    <span class="o">+</span> <span class="n">return_image_name</span>
                <span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">output_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
                    <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                    <span class="n">output_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">save_source</span><span class="p">:</span>
                        <span class="n">list_path</span> <span class="o">=</span> <span class="n">main_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">save_source</span> <span class="o">+</span> <span class="s2">&quot;.txt&quot;</span>
                        <span class="n">list_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">list_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                        <span class="n">list_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">img_src</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">list_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                    <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s2">&quot;OSError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                    <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s2">&quot;IOError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="p">)</span>

                <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;success&quot;</span>
                <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;Completed Image Thumbnail ====&gt; &quot;</span> <span class="o">+</span> <span class="n">return_image_name</span>
                <span class="p">)</span>

                <span class="c1"># image size parameter</span>
                <span class="k">if</span> <span class="n">print_size</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Image Size: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_size</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>

            <span class="k">except</span> <span class="ne">UnicodeEncodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;UnicodeEncodeError on an image...trying next one...&quot;</span>
                    <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="k">except</span> <span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># If there is any HTTPError</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;HTTPError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;URLError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CertificateError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;CertificateError on an image...trying next one...&quot;</span>
                <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># If there is any IOError</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;IOError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">download_status</span><span class="p">,</span> <span class="n">download_message</span></div>

    <span class="c1"># Download Images</span>
<div class="viewcode-block" id="googleimagesdownload.download_image"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.download_image">[docs]</a>    <span class="k">def</span> <span class="nf">download_image</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image_url</span><span class="p">,</span>
        <span class="n">image_format</span><span class="p">,</span>
        <span class="n">main_directory</span><span class="p">,</span>
        <span class="n">dir_name</span><span class="p">,</span>
        <span class="n">count</span><span class="p">,</span>
        <span class="n">print_urls</span><span class="p">,</span>
        <span class="n">socket_timeout</span><span class="p">,</span>
        <span class="n">prefix</span><span class="p">,</span>
        <span class="n">print_size</span><span class="p">,</span>
        <span class="n">no_numbering</span><span class="p">,</span>
        <span class="n">no_download</span><span class="p">,</span>
        <span class="n">save_source</span><span class="p">,</span>
        <span class="n">img_src</span><span class="p">,</span>
        <span class="n">silent_mode</span><span class="p">,</span>
        <span class="n">thumbnail_only</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">,</span>
        <span class="n">ignore_urls</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">silent_mode</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">print_urls</span> <span class="ow">or</span> <span class="n">no_download</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Image URL: &quot;</span> <span class="o">+</span> <span class="n">image_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ignore_urls</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">url</span> <span class="ow">in</span> <span class="n">image_url</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">ignore_urls</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">(</span>
                    <span class="s2">&quot;fail&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Image ignored due to &#39;ignore url&#39; parameter&quot;</span><span class="p">,</span>
                    <span class="kc">None</span><span class="p">,</span>
                    <span class="n">image_url</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="n">thumbnail_only</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="s2">&quot;success&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Skipping image download...&quot;</span><span class="p">,</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">image_url</span><span class="p">[(</span><span class="n">image_url</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]),</span>
                <span class="n">image_url</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">no_download</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="s2">&quot;Printed url without downloading&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">image_url</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span>
                <span class="n">image_url</span><span class="p">,</span>
                <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
                    <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17&quot;</span>
                <span class="p">},</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># timeout time to download an image</span>
                <span class="k">if</span> <span class="n">socket_timeout</span><span class="p">:</span>
                    <span class="n">timeout</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">socket_timeout</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span>

                <span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">response</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;.jpg&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;.jpeg&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;.gif&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;.png&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;.bmp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;.svg&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;.webp&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;.ico&quot;</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="c1"># keep everything after the last &#39;/&#39;</span>
                <span class="n">image_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">image_url</span><span class="p">[(</span><span class="n">image_url</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:])</span>
                <span class="k">if</span> <span class="nb">format</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">image_format</span> <span class="ow">or</span> <span class="n">image_format</span> <span class="o">!=</span> <span class="nb">format</span><span class="p">:</span>
                        <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                        <span class="n">download_message</span> <span class="o">=</span> <span class="s2">&quot;Wrong image format returned. Skipping...&quot;</span>
                        <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                        <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                        <span class="k">return</span> <span class="p">(</span>
                            <span class="n">download_status</span><span class="p">,</span>
                            <span class="n">download_message</span><span class="p">,</span>
                            <span class="n">return_image_name</span><span class="p">,</span>
                            <span class="n">absolute_path</span><span class="p">,</span>
                        <span class="p">)</span>

                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">image_format</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span>
                    <span class="ow">or</span> <span class="ow">not</span> <span class="n">image_format</span>
                    <span class="ow">or</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">image_format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extensions</span>
                <span class="p">):</span>
                    <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                    <span class="n">download_message</span> <span class="o">=</span> <span class="s2">&quot;Invalid or missing image format. Skipping...&quot;</span>
                    <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="k">return</span> <span class="p">(</span>
                        <span class="n">download_status</span><span class="p">,</span>
                        <span class="n">download_message</span><span class="p">,</span>
                        <span class="n">return_image_name</span><span class="p">,</span>
                        <span class="n">absolute_path</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">image_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">image_format</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">image_name</span> <span class="o">=</span> <span class="n">image_name</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">image_format</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">image_name</span> <span class="o">=</span> <span class="n">image_name</span><span class="p">[</span>
                        <span class="p">:</span> <span class="n">image_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">image_format</span><span class="p">)</span>
                        <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_format</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="p">]</span>

                <span class="c1"># prefix name in image</span>
                <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
                    <span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                <span class="k">if</span> <span class="n">no_numbering</span><span class="p">:</span>
                    <span class="n">path</span> <span class="o">=</span> <span class="n">main_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">dir_name</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">image_name</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">path</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">main_directory</span>
                        <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
                        <span class="o">+</span> <span class="n">dir_name</span>
                        <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
                        <span class="o">+</span> <span class="n">prefix</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
                        <span class="o">+</span> <span class="s2">&quot;.&quot;</span>
                        <span class="o">+</span> <span class="n">image_name</span>
                    <span class="p">)</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">output_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
                    <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                    <span class="n">output_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">save_source</span><span class="p">:</span>
                        <span class="n">list_path</span> <span class="o">=</span> <span class="n">main_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">save_source</span> <span class="o">+</span> <span class="s2">&quot;.txt&quot;</span>
                        <span class="n">list_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">list_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                        <span class="n">list_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">img_src</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">list_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="n">absolute_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                    <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s2">&quot;OSError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                <span class="c1"># return image name back to calling method to use it for thumbnail downloads</span>
                <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;success&quot;</span>
                <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;Completed Image ====&gt; &quot;</span> <span class="o">+</span> <span class="n">prefix</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">image_name</span>
                <span class="p">)</span>
                <span class="n">return_image_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">image_name</span>

                <span class="c1"># image size parameter</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">silent_mode</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">print_size</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Image Size: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_size</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>

            <span class="k">except</span> <span class="ne">UnicodeEncodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;UnicodeEncodeError on an image...trying next one...&quot;</span>
                    <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;URLError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="k">except</span> <span class="n">BadStatusLine</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
                <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;BadStatusLine on an image...trying next one...&quot;</span>
                    <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span>
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">except</span> <span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># If there is any HTTPError</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;HTTPError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;URLError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">except</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CertificateError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;CertificateError on an image...trying next one...&quot;</span>
                <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># If there is any IOError</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;IOError on an image...trying next one...&quot;</span> <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">except</span> <span class="n">IncompleteRead</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">download_status</span> <span class="o">=</span> <span class="s2">&quot;fail&quot;</span>
            <span class="n">download_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;IncompleteReadError on an image...trying next one...&quot;</span>
                <span class="o">+</span> <span class="s2">&quot; Error: &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">return_image_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">absolute_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">return</span> <span class="n">download_status</span><span class="p">,</span> <span class="n">download_message</span><span class="p">,</span> <span class="n">return_image_name</span><span class="p">,</span> <span class="n">absolute_path</span></div>

    <span class="c1"># Finding &#39;Next Image&#39; from the given raw page</span>
<div class="viewcode-block" id="googleimagesdownload._get_next_item"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload._get_next_item">[docs]</a>    <span class="k">def</span> <span class="nf">_get_next_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">start_line</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;rg_meta notranslate&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start_line</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>  <span class="c1"># If no links are found then give an error!</span>
            <span class="n">end_quote</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;no_links&quot;</span>
            <span class="k">return</span> <span class="n">link</span><span class="p">,</span> <span class="n">end_quote</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">start_line</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;class=&quot;rg_meta notranslate&quot;&gt;&#39;</span><span class="p">)</span>
            <span class="n">start_object</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="n">start_line</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">end_object</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&lt;/div&gt;&quot;</span><span class="p">,</span> <span class="n">start_object</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">object_raw</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">start_object</span><span class="p">:</span><span class="n">end_object</span><span class="p">])</span>
            <span class="c1"># remove escape characters based on python version</span>
            <span class="n">version</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">cur_version</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span>
            <span class="k">if</span> <span class="n">cur_version</span> <span class="o">&gt;=</span> <span class="n">version</span><span class="p">:</span>  <span class="c1"># python3</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">object_decode</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">object_raw</span><span class="p">,</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">)</span>
                    <span class="n">final_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">object_decode</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">final_object</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># python2</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">final_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repair</span><span class="p">(</span><span class="n">object_raw</span><span class="p">))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">final_object</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">return</span> <span class="n">final_object</span><span class="p">,</span> <span class="n">end_object</span></div>

    <span class="c1"># Getting all links with the help of &#39;_images_get_next_image&#39;</span>
<div class="viewcode-block" id="googleimagesdownload._get_image_objects"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload._get_image_objects">[docs]</a>    <span class="k">def</span> <span class="nf">_get_image_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">start_line</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;AF_initDataCallback({key: </span><span class="se">\\</span><span class="s2">&#39;ds:1</span><span class="se">\\</span><span class="s2">&#39;&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="mi">10</span>
        <span class="n">start_object</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="n">start_line</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">end_object</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;&lt;/script&gt;&quot;</span><span class="p">,</span> <span class="n">start_object</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">4</span>
        <span class="n">object_raw</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">start_object</span><span class="p">:</span><span class="n">end_object</span><span class="p">])</span>
        <span class="n">object_decode</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">object_raw</span><span class="p">,</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">)</span>
        <span class="n">image_objects</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">object_decode</span><span class="p">)[</span><span class="mi">31</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">12</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">image_objects</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">image_objects</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">image_objects</span></div>

<div class="viewcode-block" id="googleimagesdownload._get_all_items"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload._get_all_items">[docs]</a>    <span class="k">def</span> <span class="nf">_get_all_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">,</span> <span class="n">main_directory</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">arguments</span><span class="p">):</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">abs_path</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">errorCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">image_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_image_objects</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">limit</span> <span class="o">+</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_objects</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image_objects</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;no_links&quot;</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># format the item for readability</span>
                <span class="nb">object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_object</span><span class="p">(</span><span class="n">image_objects</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Image Metadata: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">object</span><span class="p">))</span>

                <span class="c1"># download the images</span>
                <span class="p">(</span>
                    <span class="n">download_status</span><span class="p">,</span>
                    <span class="n">download_message</span><span class="p">,</span>
                    <span class="n">return_image_name</span><span class="p">,</span>
                    <span class="n">absolute_path</span><span class="p">,</span>
                <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_image</span><span class="p">(</span>
                    <span class="nb">object</span><span class="p">[</span><span class="s2">&quot;image_link&quot;</span><span class="p">],</span>
                    <span class="nb">object</span><span class="p">[</span><span class="s2">&quot;image_format&quot;</span><span class="p">],</span>
                    <span class="n">main_directory</span><span class="p">,</span>
                    <span class="n">dir_name</span><span class="p">,</span>
                    <span class="n">count</span><span class="p">,</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;print_urls&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;socket_timeout&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;prefix&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;print_size&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;no_numbering&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;no_download&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;save_source&quot;</span><span class="p">],</span>
                    <span class="nb">object</span><span class="p">[</span><span class="s2">&quot;image_source&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;thumbnail_only&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">],</span>
                    <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;ignore_urls&quot;</span><span class="p">],</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">download_message</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">download_status</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span><span class="p">:</span>

                    <span class="c1"># download image_thumbnails</span>
                    <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;thumbnail&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;thumbnail_only&quot;</span><span class="p">]:</span>
                        <span class="p">(</span>
                            <span class="n">download_status</span><span class="p">,</span>
                            <span class="n">download_message_thumbnail</span><span class="p">,</span>
                        <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_image_thumbnail</span><span class="p">(</span>
                            <span class="nb">object</span><span class="p">[</span><span class="s2">&quot;image_thumbnail_url&quot;</span><span class="p">],</span>
                            <span class="n">main_directory</span><span class="p">,</span>
                            <span class="n">dir_name</span><span class="p">,</span>
                            <span class="n">return_image_name</span><span class="p">,</span>
                            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;print_urls&quot;</span><span class="p">],</span>
                            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;socket_timeout&quot;</span><span class="p">],</span>
                            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;print_size&quot;</span><span class="p">],</span>
                            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;no_download&quot;</span><span class="p">],</span>
                            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;save_source&quot;</span><span class="p">],</span>
                            <span class="nb">object</span><span class="p">[</span><span class="s2">&quot;image_source&quot;</span><span class="p">],</span>
                            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;ignore_urls&quot;</span><span class="p">],</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">download_message_thumbnail</span><span class="p">)</span>

                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="nb">object</span><span class="p">[</span><span class="s2">&quot;image_filename&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">return_image_name</span>
                    <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="nb">object</span>
                    <span class="p">)</span>  <span class="c1"># Append all the links in the list named &#39;Links&#39;</span>
                    <span class="n">abs_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">absolute_path</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">errorCount</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="c1"># delay param</span>
                <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;delay&quot;</span><span class="p">]:</span>
                    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;delay&quot;</span><span class="p">]))</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">limit</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Unfortunately all &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
                <span class="o">+</span> <span class="s2">&quot; could not be downloaded because some images were not downloadable. &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="o">+</span> <span class="s2">&quot; is all we got for this search filter!&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">items</span><span class="p">,</span> <span class="n">errorCount</span><span class="p">,</span> <span class="n">abs_path</span></div>

    <span class="c1"># Bulk Download</span>
<div class="viewcode-block" id="googleimagesdownload.download"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.download">[docs]</a>    <span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arguments</span><span class="p">):</span>
        <span class="n">paths_agg</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># for input coming from other python files</span>
        <span class="k">if</span> <span class="vm">__name__</span> <span class="o">!=</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
            <span class="c1"># if the calling file contains config_file param</span>
            <span class="k">if</span> <span class="s2">&quot;config_file&quot;</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
                <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">json_file</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;config_file&quot;</span><span class="p">]))</span>
                <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">json_file</span><span class="p">[</span><span class="s2">&quot;Records&quot;</span><span class="p">])):</span>
                    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">args_list</span><span class="p">:</span>
                        <span class="n">arguments</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">json_file</span><span class="p">[</span><span class="s2">&quot;Records&quot;</span><span class="p">][</span><span class="n">record</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">arguments</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                    <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
                <span class="n">total_errors</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
                    <span class="n">paths</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_executor</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
                        <span class="n">paths_agg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;print_paths&quot;</span><span class="p">]:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">paths</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;raw_unicode_escape&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
                    <span class="n">total_errors</span> <span class="o">=</span> <span class="n">total_errors</span> <span class="o">+</span> <span class="n">errors</span>
                <span class="k">return</span> <span class="n">paths_agg</span><span class="p">,</span> <span class="n">total_errors</span>
            <span class="c1"># if the calling file contains params directly</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">paths</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_executor</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
                    <span class="n">paths_agg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;print_paths&quot;</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">paths</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;raw_unicode_escape&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">paths_agg</span><span class="p">,</span> <span class="n">errors</span>
        <span class="c1"># for input coming from CLI</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paths</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_executor</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
                <span class="n">paths_agg</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;print_paths&quot;</span><span class="p">]:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">paths</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;raw_unicode_escape&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">paths_agg</span><span class="p">,</span> <span class="n">errors</span></div>

<div class="viewcode-block" id="googleimagesdownload.download_executor"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.googleimagesdownload.download_executor">[docs]</a>    <span class="k">def</span> <span class="nf">download_executor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arguments</span><span class="p">):</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">errorCount</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
                <span class="n">arguments</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">######Initialization and Validation of user arguments</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;keywords&quot;</span><span class="p">]:</span>
            <span class="n">search_keyword</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;keywords&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;keywords_from_file&quot;</span><span class="p">]:</span>
            <span class="n">search_keyword</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keywords_from_file</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;keywords_from_file&quot;</span><span class="p">])</span>

        <span class="c1"># both time and time range should not be allowed in the same query</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;time_range&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Either time or time range should be used in a query. Both cannot be used at the same time.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># both time and time range should not be allowed in the same query</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;exact_size&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Either &quot;size&quot; or &quot;exact_size&quot; should be used in a query. Both cannot be used at the same time.&#39;</span>
            <span class="p">)</span>

        <span class="c1"># both image directory and no image directory should not be allowed in the same query</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;image_directory&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;no_directory&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;You can either specify image directory or specify no image directory, not both!&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Additional words added to keywords</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;suffix_keywords&quot;</span><span class="p">]:</span>
            <span class="n">suffix_keywords</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">sk</span><span class="p">)</span> <span class="k">for</span> <span class="n">sk</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;suffix_keywords&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">suffix_keywords</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>

        <span class="c1"># Additional words added to keywords</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;prefix_keywords&quot;</span><span class="p">]:</span>
            <span class="n">prefix_keywords</span> <span class="o">=</span> <span class="p">[</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">sk</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="k">for</span> <span class="n">sk</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;prefix_keywords&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prefix_keywords</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>

        <span class="c1"># Setting limit on number of images to be downloaded</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">]:</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;limit&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]:</span>
            <span class="n">current_time</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">search_keyword</span> <span class="o">=</span> <span class="p">[</span><span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;similar_images&quot;</span><span class="p">]:</span>
            <span class="n">current_time</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">search_keyword</span> <span class="o">=</span> <span class="p">[</span><span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)]</span>

        <span class="c1"># If single_image or url argument not present then keywords is mandatory argument</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;single_image&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;similar_images&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;keywords&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;keywords_from_file&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;-------------------------------</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;Uh oh! Keywords is a required argument </span><span class="se">\n\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;Please refer to the documentation on guide to writing queries </span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;https://github.com/hardikvasa/google-images-download#examples&quot;</span>
                <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">exiting!</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;-------------------------------&quot;</span>
            <span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

        <span class="c1"># If this argument is present, set the custom output directory</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;output_directory&quot;</span><span class="p">]:</span>
            <span class="n">main_directory</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;output_directory&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">main_directory</span> <span class="o">=</span> <span class="s2">&quot;downloads&quot;</span>

        <span class="c1"># Proxy settings</span>
        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;proxy&quot;</span><span class="p">]:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;http_proxy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;proxy&quot;</span><span class="p">]</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;https_proxy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;proxy&quot;</span><span class="p">]</span>
            <span class="c1">######Initialization Complete</span>
        <span class="n">total_errors</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">pky</span> <span class="ow">in</span> <span class="n">prefix_keywords</span><span class="p">:</span>  <span class="c1"># 1.for every prefix keywords</span>
            <span class="k">for</span> <span class="n">sky</span> <span class="ow">in</span> <span class="n">suffix_keywords</span><span class="p">:</span>  <span class="c1"># 2.for every suffix keywords</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">search_keyword</span><span class="p">):</span>  <span class="c1"># 3.for every main keyword</span>
                    <span class="n">iteration</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="o">+</span> <span class="s2">&quot;Item no.: &quot;</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="o">+</span> <span class="s2">&quot; --&gt;&quot;</span>
                        <span class="o">+</span> <span class="s2">&quot; Item name = &quot;</span>
                        <span class="o">+</span> <span class="p">(</span><span class="n">pky</span><span class="p">)</span>
                        <span class="o">+</span> <span class="p">(</span><span class="n">search_keyword</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="o">+</span> <span class="p">(</span><span class="n">sky</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">iteration</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;raw_unicode_escape&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Evaluating...&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span>
                            <span class="s2">&quot;Downloading images for: &quot;</span>
                            <span class="o">+</span> <span class="p">(</span><span class="n">pky</span><span class="p">)</span>
                            <span class="o">+</span> <span class="p">(</span><span class="n">search_keyword</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                            <span class="o">+</span> <span class="p">(</span><span class="n">sky</span><span class="p">)</span>
                            <span class="o">+</span> <span class="s2">&quot; ...&quot;</span>
                        <span class="p">)</span>
                    <span class="n">search_term</span> <span class="o">=</span> <span class="n">pky</span> <span class="o">+</span> <span class="n">search_keyword</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">sky</span>

                    <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;image_directory&quot;</span><span class="p">]:</span>
                        <span class="n">dir_name</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;image_directory&quot;</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;no_directory&quot;</span><span class="p">]:</span>
                        <span class="n">dir_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">dir_name</span> <span class="o">=</span> <span class="n">search_term</span> <span class="o">+</span> <span class="p">(</span>
                            <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                        <span class="p">)</span>  <span class="c1"># sub-directory</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;no_download&quot;</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">create_directories</span><span class="p">(</span>
                            <span class="n">main_directory</span><span class="p">,</span>
                            <span class="n">dir_name</span><span class="p">,</span>
                            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;thumbnail&quot;</span><span class="p">],</span>
                            <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;thumbnail_only&quot;</span><span class="p">],</span>
                        <span class="p">)</span>  <span class="c1"># create directories in OS</span>

                    <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_url_parameters</span><span class="p">(</span>
                        <span class="n">arguments</span>
                    <span class="p">)</span>  <span class="c1"># building URL with params</span>

                    <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_search_url</span><span class="p">(</span>
                        <span class="n">search_term</span><span class="p">,</span>
                        <span class="n">params</span><span class="p">,</span>
                        <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">],</span>
                        <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;similar_images&quot;</span><span class="p">],</span>
                        <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;specific_site&quot;</span><span class="p">],</span>
                        <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;safe_search&quot;</span><span class="p">],</span>
                    <span class="p">)</span>  <span class="c1"># building main search url</span>

                    <span class="k">if</span> <span class="n">limit</span> <span class="o">&lt;</span> <span class="mi">101</span><span class="p">:</span>
                        <span class="n">raw_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># download page</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">raw_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_extended_page</span><span class="p">(</span>
                            <span class="n">url</span><span class="p">,</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;chromedriver&quot;</span><span class="p">]</span>
                        <span class="p">)</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;no_download&quot;</span><span class="p">]:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Getting URLs without downloading images...&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting Download...&quot;</span><span class="p">)</span>
                    <span class="n">items</span><span class="p">,</span> <span class="n">errorCount</span><span class="p">,</span> <span class="n">abs_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_items</span><span class="p">(</span>
                        <span class="n">raw_html</span><span class="p">,</span> <span class="n">main_directory</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">arguments</span>
                    <span class="p">)</span>  <span class="c1"># get all image items and download images</span>
                    <span class="n">paths</span><span class="p">[</span><span class="n">pky</span> <span class="o">+</span> <span class="n">search_keyword</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">sky</span><span class="p">]</span> <span class="o">=</span> <span class="n">abs_path</span>

                    <span class="c1"># dumps into a json file</span>
                    <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;extract_metadata&quot;</span><span class="p">]:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;logs&quot;</span><span class="p">):</span>
                                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;logs&quot;</span><span class="p">)</span>
                        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                        <span class="n">json_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;logs/&quot;</span> <span class="o">+</span> <span class="n">search_keyword</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
                        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">json_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                    <span class="c1"># Related images</span>
                    <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;related_images&quot;</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span>
                            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Getting list of related keywords...this may take a few moments&quot;</span>
                        <span class="p">)</span>
                        <span class="n">tabs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_tabs</span><span class="p">(</span><span class="n">raw_html</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tabs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                            <span class="n">final_search_term</span> <span class="o">=</span> <span class="n">search_term</span> <span class="o">+</span> <span class="s2">&quot; - &quot;</span> <span class="o">+</span> <span class="n">key</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Now Downloading - &quot;</span> <span class="o">+</span> <span class="n">final_search_term</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">limit</span> <span class="o">&lt;</span> <span class="mi">101</span><span class="p">:</span>
                                <span class="n">new_raw_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_page</span><span class="p">(</span>
                                    <span class="n">value</span>
                                <span class="p">)</span>  <span class="c1"># download page</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">new_raw_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_extended_page</span><span class="p">(</span>
                                    <span class="n">value</span><span class="p">,</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;chromedriver&quot;</span><span class="p">]</span>
                                <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">create_directories</span><span class="p">(</span>
                                <span class="n">main_directory</span><span class="p">,</span>
                                <span class="n">final_search_term</span><span class="p">,</span>
                                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;thumbnail&quot;</span><span class="p">],</span>
                                <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;thumbnail_only&quot;</span><span class="p">],</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_items</span><span class="p">(</span>
                                <span class="n">new_raw_html</span><span class="p">,</span>
                                <span class="n">main_directory</span><span class="p">,</span>
                                <span class="n">search_term</span> <span class="o">+</span> <span class="s2">&quot; - &quot;</span> <span class="o">+</span> <span class="n">key</span><span class="p">,</span>
                                <span class="n">limit</span><span class="p">,</span>
                                <span class="n">arguments</span><span class="p">,</span>
                            <span class="p">)</span>

                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">total_errors</span> <span class="o">=</span> <span class="n">total_errors</span> <span class="o">+</span> <span class="n">errorCount</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Errors: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">errorCount</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">paths</span><span class="p">,</span> <span class="n">total_errors</span></div></div>


<span class="c1"># ------------- Main Program -------------#</span>
<div class="viewcode-block" id="main"><a class="viewcode-back" href="../../autoapi/google_images_download/google_images_download/index.html#google_images_download.google_images_download.main">[docs]</a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">records</span> <span class="o">=</span> <span class="n">user_input</span><span class="p">()</span>
    <span class="n">total_errors</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c1"># start the timer</span>
    <span class="k">for</span> <span class="n">arguments</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;single_image&quot;</span><span class="p">]:</span>  <span class="c1"># Download Single Image using a URL</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">googleimagesdownload</span><span class="p">()</span>
            <span class="n">response</span><span class="o">.</span><span class="n">single_image</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;single_image&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># or download multiple images based on keywords/keyphrase search</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">googleimagesdownload</span><span class="p">()</span>
            <span class="n">paths</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">download</span><span class="p">(</span>
                <span class="n">arguments</span>
            <span class="p">)</span>  <span class="c1"># wrapping response in a variable just for consistency</span>
            <span class="n">total_errors</span> <span class="o">=</span> <span class="n">total_errors</span> <span class="o">+</span> <span class="n">errors</span>

        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c1"># stop the timer</span>
        <span class="n">total_time</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span>
        <span class="p">)</span>  <span class="c1"># Calculating the total time required to crawl, find and download all the links of 60,000 images</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">arguments</span><span class="p">[</span><span class="s2">&quot;silent_mode&quot;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Everything downloaded!&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total errors: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">total_errors</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total time taken: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">total_time</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; Seconds&quot;</span><span class="p">)</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>

<span class="c1"># In[ ]:</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, David Fischer

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>