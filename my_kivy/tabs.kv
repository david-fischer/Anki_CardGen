#:import WordProperties my_kivy.user_input.WordProperties
#:import make_card main.make_card

<EditTab@BoxLayout+MDTabsBase>:
    orientation: "vertical"

    ScrollView:
        id: word_scroll
        do_scroll_x: False
        do_scroll_y: True
        size_hint: 1,1
        WordProperties:
            id: word_prop
            size_hint:1,None
            height: self.minimum_height

<ImageTab@Tab>:
    StackLayout:
        MDTextField:
            id: img_search_field
            hint_text: "Image Search"
            text: "test"
            on_text_validate: image_grid.get_images(self.text)
            #pos_hint: {"center_x":0.5,"center_y":0}

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            size_hint: 1,1
            ImageSearchResultGrid:
                cols: 2
                id: image_grid
                row_default_height: (self.width - self.cols*self.spacing[0]) / self.cols *3/4
                row_force_default: True
                size_hint_y: None
                height: self.minimum_height
                padding: dp(4), dp(4)
                spacing: dp(4)
                check_one: True

        MDFloatingActionButton:
            pos_hint: {"center_x":0.5,"center_y":0.5}
            on_press: image_grid.element_dicts = [{"source":url} for url in app.word.image_urls]


<PreviewTab@Tab>:

BoxLayout:
    orientation: "vertical"

    SuggestionBanner:
        id: suggestion_banner
        vertical_pad: 0
        text: [self.message]
        left_action: ["OK", lambda x : self.dispatch("on_ok")]
        right_action: ["CLOSE", self.hide]
        over_widget: edit_tab

    FloatLayout:
        MDTabs:
            id: main_tabs
            pos_hint: {"top":1.0}
            on_parent: self.ids.carousel.ignore_perpendicular_swipes = True;self.ids.carousel.min_move = 0.07;
            EditTab:
                id: edit_tab
                text:"file-document-edit-outline"

            ImageTab:
                id: image_tab
                text: "image-search-outline"

            PreviewTab:
                text: "eye"

        MDFloatingActionButton:
            icon: "check-bold"
            pos_hint: {"center_x":0.9, "center_y":0.1}
            on_press: make_card()
