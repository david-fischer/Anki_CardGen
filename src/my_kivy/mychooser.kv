#:import Factory kivy.factory.Factory
<ThemableColorChangeBehavior>:
    canvas:
        Color:
            rgba: root.bg_color

<MyCheckChip>:
    icon: ""
    size_hint: None,  None
    height: "26dp"
    padding: 0, 0, "5dp", 0
    width: self.minimum_width - dp(10)
    canvas:
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(12)]

    BoxLayout:
        size_hint_x: None
        width: self.minimum_width+ (0 if (root.icon == "") else 30)
        padding: dp(15)
        spacing: dp(5)

        Label:
            id: label
            text: root.text
            color: root.text_color
            size_hint_x: None
            pos_hint: {"left":0}
            width: self.texture_size[0]

        MDIcon:
            id: "icon"
            icon: root.icon
            size: 100,100
            text_size: 100,100
            texture_size: 100,100
            color: root.text_color

<MyCheckCard>:
    padding: 15,15
    size_hint: 1,None
    border_radio: 20
    height: label.texture_size[1]+2*self.padding[1]
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size

    MDLabel:
        id: label
        size_hint: 1,1
        text: root.text
        height: self.texture_size[1]
        theme_text_color: "Custom"
        color: root.text_color


<MyCheckCardContainer>:
    orientation: "vertical"
    padding: 20,20
    spacing: 5
    size_hint: 1,None
    height: self.minimum_height
    canvas:
        Color:
            rgba: self.theme_cls.divider_color
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height


<MyCheckChipContainer>:
    orientation: "lr-tb"
    padding: 20,20
    spacing: 10,10
    size_hint:1, None
    height: self.minimum_height
    canvas:
        Color:
            rgba: self.theme_cls.divider_color
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height


<MyCheckImageTile>:
    box_color: 0,0,0,0
    canvas:
        Color:
            rgba: self.theme_cls.primary_color
        Line:
            id: border_line
            width: self.border_width
            rectangle: self.x, self.y, self.width, self.height


<RecycleViewGrid>:
    size_hint: 1,1
    pos_hint:{"y":"bottom"}
    RecycleGridLayout:
        cols: 2
        row_default_height: (self.width - self.cols*self.spacing[0]) / self.cols /4*3
        row_force_default: True
        size_hint_y: None
        default_size_hint:1,1
        height: self.minimum_height
        padding: dp(4), dp(4)
        spacing: dp(4)

<RecycleViewBox>:
    size_hint: .9,.9
    RecycleBoxLayout:
        size_hint: 1,None
        default_size_hint: 1, None
        default_size: None, None
        height: self.minimum_height
        orientation: 'vertical'
        padding: 50,50
        spacing: 25



<MyCarousel>:
    carousel: carousel
    parent_widget: carousel
    size_hint_y: None
    recycle_view_name: "RecycleViewBox"
    recycle_view_data_class: "TransCard"
    Carousel:
        id: carousel
        pos: root.pos
        size:root.size
        on_current_slide: root.update_height()
        ignore_perpendicular_swipes: True
#        canvas:
#            Color:
#                rgba: 0,0,0,0.5
#            Rectangle:
#                pos: self.pos
#                size: self.size
        size_hint_x: 1

    MDIconButton:
        id: left_icon
        pos_hint: {"center_y":0.5,"x":0}
        icon: "" if not carousel.index else "chevron-left"
        on_press: carousel.load_previous()

    MDIconButton:
        id: right_icon
        pos_hint: {"center_y":0.5,"right":1}
        icon: "" if carousel.index is None else "chevron-right" if carousel.index < len(carousel.slides) -1 else ""
        on_press: carousel.load_next()



<TransCard>:
    orientation: "vertical"
    padding: dp(8),dp(8)
    spacing: dp(8)
    size_hint: None,None
    pos_hint: {"center_x":0.5,"center_y":0.5}
    border_radius: 20
    height: self.minimum_height
    #height: max(label_orig.texture_size[1],label_trans.texture_size[1])+2*self.padding[1]
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size

    MDLabel:
        id: label_orig
        size_hint: 1,None
        size: self.texture_size
        text: root.text_orig
#        height: self.texture_size[1]

    MDSeparator:
        orientation: "horizontal"

    MDLabel:
        id: label_trans
        size_hint: 1,None
        size: self.texture_size
        text: root.text_trans

<CardCarousel>:
    child_class_name: "TransCard"
    recycle_view_data_class: "TransCard"
    recycle_view_name: "ScrollBox"

<ImageCarousel>:
    child_class_name: "LongPressImage"
    recycle_view_data_class: "MyCheckImageTile"
    recycle_view_name: "ScrollGrid"

<ScrollBox>:
    parent_widget: stack
    do_scroll_x: False
    do_scroll_y: True
    size_hint: 1, 1

    BoxLayout:
        id:stack
        padding: dp(8),dp(8)
        spacing: dp(8)
        orientation: "vertical"
        size_hint:1,None
        height: self.minimum_height

<ScrollGrid>:
    do_scroll_x: False
    do_scroll_y: True
    size_hint: 1,1
    parent_widget: grid
    GridLayout:
        cols: 2
        id: grid
        row_default_height: (self.width - self.cols*self.spacing[0]) / self.cols *3/4
        row_force_default: True
        size_hint_y: None
        height: self.minimum_height
        padding: dp(4), dp(4)
        spacing: dp(4)
        spacing: dp(4)